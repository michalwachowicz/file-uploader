<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      <%= locals.folder
        ? `${locals.folder.name} | ${locals.user.username} | File Uploader`
        : `${locals.user.username} | File Uploader`
      %>
    </title>
  </head>
  <body>
    <%- include('partials/header') %>

    <main>
      <aside>
        <button>New</button>

        <ul>
          <li>
            <details open>
              <summary><a href="/"><%= user.username %>'s drive</a></summary>
              <% if (allFolders && allFolders.length > 0) { %>
                <ul>
                  <% for (const folder of allFolders) { %>
                    <%- include('partials/folder-tree', { node: folder }) %>
                  <% } %>
                </ul>
              <% } %>
            </details>
          </li>
        </ul>
      </aside>

      <section>
        <%- include('partials/folder-table', { folders, files }) %>
      </section>
    </main>
  </body>
</html>
